# 4. Le langage YAML

## 4.1. Le format YAML

**YAML**, qui signifie "**YAML Ain't Markup Language**" (YAML n'est pas un langage de balisage - comme HTML par exemple), est un format de données lisble par l'être humain (du moins les informaticiens), largement utilisé pour la configuration des applications, la définition des déploiements d'infrastructure en tant que code (**IaC**), et d'autres tâches où les données sont à la fois lues par de machines et des humains.

Ce langage est extrêmement utilisé en **DevOps** : **Docker**, **CI/CD**, **Ansible**, **Kubernetes**, etc. utilisent tous le **YAML**.

Il est nécessaire de bien maîtriser le **YAML** avant de démarer l'utilisation de Ansible ou tout autres outils du domaine du **DevOps**.

## 4.2. La syntaxe **YAML**

(voir comme exemple le fichier `./src/01/04/example.yaml`)

La syntaxe **YAML** est conçue pour être simple et lisible par un être humain. Elle est moins verbeuse que le **XML** et plus descriptive que le **CSV**.

Elle est plus facile à lire que le **JSON**.

La syntaxe emprunte des éléments de langages de haut niveau, tels que l'utilisation du dièse (`#`) pour les commentaires et le tilde (`~`) pour représenter une valeur nulle.

Les concepts clés sont :

- **Indentation** ; l'indentation (habituellement _avec des espaces_, non des tabulations) est utiliée pour indiquer les niveaux de hiérarchie des données.
- **Listes** : collections ordonnées d'éléments, et sont représentées en **YAML** en commençant chaque élément de la liste par un tiret haut (`-`).
- **Dictionnaires** : collection de paires de clés et de valeurs, et peut être représenté en **YAML** en utilisant des deux-points (`:`) pour séparer chaque clé de sa valeur.
- **Documents** : Les documents **YAML** peuvent être séparés dans un même fichier par trois tirets haut (`---`).

### 4.2.1. Commentaires

Les commentaires commencent par le signe dièse (`#`) et s'étendent jusqu'à la fin de la ligne.

```YAML
# This is a comment, it's finish at the end of this line
```

### 4.2.2. Valeurs `Null`

Vous pouvez représenter une valeur `null` avec le tilde (`~`)

```YAML
aKey: ~ # This means that the value is zero
```

### 4.2.3. Tableau (listes)

Les tableaux sont définis avec des tirets haut (`-`) suivi d'un espace

```YAML
ips:
  - 192.168.1.10
  - 192.168.1.11
  - 10.0.1.10
  - 10.0.1.11
```

### 4.2.4. Dictionnaires (clé-valeur)

Les paires clé-valeur sont séparées par des deux-points (`:`), suivi d'un espace

```YAML
administrator:
  identifiant: admin
  password: @dm1ni5tr@t0r!#2025
```

### 4.2.5. Texte Multiligne

**YAML** permet d'écrire du texte sur plusieurs lignes en utilisant le pipe (`|`) pour conserver les retours à la ligne, ou le chevron (`>`) pour les convertir en espaces.

```YAML
description: |
This is a text that
preserves line breaks.
```

```YAML
description: >
This is a text that
replaces line breaks
with spaces.
```

### 4.2.6. Références et `alias`

Vous pouvez réutiliser des noeuds en les marquant avec une esperluette (`&`) et en y faisant référence avec un astérisque (`*`)

```YAML
students:
  - &john
    name: John
    age: 20
  - name: Marie
    age: 22
  - *john # This is a reference to "John" student.
```

### 4.2.7. Type de Données

**YAML** identifie automatiquement les types de données (comme les entiers, les flottants et les booléens) mais vous pouvez également les marquer explicitement.

```YAML
one_integer: !!int 42
one_boolean: !!bool true
```

### 4.2.8. Indentation

L'indentation est utilisée pour représenter la structure imbriquée, et seuls les espaces sont autorisés pour l'indentation (les tabulations ne sont pas autorisées).

### 4.2.9. Documents multiples

Vous pouvez avoir plusieurs documents **YAML** dans un seul fichier, séparés par `---`.

```YAML
---
document1: value1
---
document2: value2
```
