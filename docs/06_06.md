# 6. Les variables magiques

## 6.1. Les variables magiques

Certaines variables spéciales, appelées variables magiques, permettent d'accéder à des informations critiques sur vos opérations **Ansible**, les hôtes, les groupes dans votre inventaire, et plus encore.

## 6.2. Variables magiques communes

### hostvars

Permet d'accéder aux variables de tous les hôtes dans votre inventaire, quel que soit l'endroit dans le **playbook**.

```YAML
{{ hostvars['node1']['ansible_facts']['distribution'] }}
```

### groups

Contient la liste de tous les groupes et hôtes dans l'inventaire.

### group_names

Contient une liste des groupes auxquels l'hôte actuel appartient.

### inventory_hostname et inventory_hostname_short

- **inventory_hostname** est le nom de l'hôte tel qu'il est configuré dans votre inventaire.
- **inventory_hostname_short** est la version courte de ce nom, jusqu'au premier point.

## 6.3. Autres variables magiques utiles

- **ansible_play_hosts** : liste tous les hôtes encore actifs dans le **play** courant.
- **ansible_play_batch** : liste des hôtes dans le 'batch' courant du **play**.
- **ansible_playbook_python** : chemin de l’exécutable **Python** utilisé pour invoquer Ansible.
- **inventory_dir** : chemin du dossier contenant le fichier d'inventaire d'Ansible.
- **inventory_file** : chemin complet vers le fichier d'inventaire.
- **playbook_dir** : répertoire de base du **playbook**.
- **role_path** : chemin du rôle courant, utilisable uniquement à l'intérieur d'un rôle.
- **ansible_check_mode** : booléen indiquant si le **playbook** est exécuté en mode vérification (`--check`).

La liste exhaustive des variables magiques se trouve [ici](https://docs.ansible.com/ansible/latest/reference_appendices/special_variables.html).
