# 5. Configurer ansible avec le fichier ansible.cfg

## 5.1. Fichier de configuration

**Ansible** utilise un fichier de configuration, généralement nommé `ansible.cfg`, pour définir divers paramètres.

Ce fichier permet aux utilisateurs de modifier les réglages par défaut pour adapter **Ansible** à leurs besoins spécifiques.

**Ansible** recherche le fichier de configuration dans plusieurs emplacements dans un ordre spécifique :

- le répertoire courant,
- la variable d'environnement `ANSIBLE_CONFIG`,
- le répertoire personnel de l'utilisateur (`~/.ansible.cfg`),
- et enfin `/etc/ansible/ansible.cfg`.

Si vous installez Ansible via un gestionnaire de paquets, vous trouverez généralement `ansible.cfg` dans `/etc/ansible`.

Si Ansible est installé via **pip** ou depuis le **code sourc**e, vous pouvez créer ce fichier manuellement pour surcharger les configurations par défaut.

## 5.2. Visualiser toutes les configurations par défaut

Utilisez la commande suivante pour générer un fichier de configuration avec tous les réglages par défaut désactivés :

```SHELL
ansible-config init --disabled > ansible.cfg
```

Vous pouvez aussi utiliser les commandes suivantes :

```SHELL
ansible-config list
```

Cette commande affichera toutes les configurations actives et leurs sources.

Ou la commande :

```SHELL
ansible-config view
```

Elle montrera le contenu effectif du fichier de configuration actuellement utilisé par **Ansible**.

## 5.3. Exemples d'options souvent utilisées

### [defaults]

- **inventory** : spécifie l'emplacement du fichier d'inventaire par défaut.
- **library** : chemin vers les modules supplémentaires à charger.
- **forks** : nombre de processus parallèles à utiliser (nombre de machines à gérer simultanément).
- **remote_port** : le port à utiliser pour la connexion **SSH**.
- **remote_user** : l'utilisateur par défaut pour les connexions **SSH**.
- **private_key_file** : chemin d'accès à la clé privée utilisée pour l'authentification **SSH**.
- **host_key_checking** : active ou désactive la vérification de la clé de l'hôte, ce qui peut être utile pour les déploiements automatisés et les environnements dynamiques.

### [privilege_escalation]

- **become** : active ou désactive par défaut l'escalade de privilèges.
- **become_method** : méthode d'escalade de privilèges à utiliser par défaut (**sudo**, **su**, etc.).
- **become_user** : utilisateur à devenir par défaut lors de l'escalade de privilèges.
- **become_ask_pass** : demande le mot de passe pour l'escalade de privilèges.

### [ssh_connection]

- **pipelining** : réduit le nombre de connexions **SSH** nécessaires pour exécuter un module, ce qui peut augmenter considérablement la vitesse d'exécution des commandes.
- **ssh_args** : arguments supplémentaires à utiliser lors de la connexion via SSH.

### [persistent_connection]

- **connect_timeout** : délai avant expiration lors de la tentative de connexion persistante.
- **command_timeout** : délai avant expiration lors de l'exécution de commandes via une connexion persistante.
